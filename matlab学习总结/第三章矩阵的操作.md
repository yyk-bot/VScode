# 第三章
## 第一节 矩阵的基础知识
## 第二节 MATLAB中的向量
  1. 向量的创建方法
     1. 直接输入法
      -   向量元素需要用英文的中括号“[]”括起来，元素之间用空格、逗号、分号或按回车键 分隔，就可以创建对应的向量。若元素之间用空格、逗号分隔，则创建的是行向量；若用分号、 回车键分隔，则创建的是列向量。 (注意：这里的逗号和分号都是英文输入法下输入的，不能 用中文的逗号或分号)
     2. 冒号法
      - 利用命令：A:step:B     来创建一个行向量
      - A 是起始值，step 是每次递增或递减的步长，B 是终止值(不一定刚好停在这里)。
      - 若A> B且步长step >0,则会返回空的向量。
      - 若A< B且步长step >0,则会返回空的向量。
      - 若step =θ,则返回空的向量。
      -  MATLAB中，我们可以直接使用命令[]创建空的向量。
     3. 利用MATLAB函数创建
      - linspace 和 logspace, 它们分别用来创建等差数列和等比数列。
      - linspace(a,b):该命令用来创建一个行向量，向量中的第一个元素为a, 最后一个元素为b, 形成总数为100个元素的线性间隔的向量。
      - linspace(a,b,n): 该命令用来创建一个行向量，向量中的第一个元素为a,最后一个元素为b, 形成总数为n个元素的线性间隔的向量。
      - logspace(a,b): 创建一个行向量，其第一个元素为10^a,最后一个元素为10^b,形成总数为50个元素的等比数列向量。
      - logspace(a,b,n):创建一个行向量，其第一个元素为10^a,最后一个元素为10^b,形成总数为n个元素的等比数列向量。
  2. 向量元素的引用
     - 在 MATLAB中，可以使用length 函数或 numel 函数来计算向量中包含的元素个数。
     1. 单个元素引用
      - 提取向量a 中单个元素的方法很简单，只需要利用a(ind)命令，小括号中的ind 就 是 你要提取的对应元素的索引。
      - ==数组索引必须为正整数或逻辑值==
     2. 多个元素引用
      -  只需要将ind 设 置成一个向量，ind 中放入我们想要提取的元素的索引，然后使用a(ind)命令即可对a中相对应的ind中的索引值进行提取（ind的表示可以使用等比表示方法，列如：a(1:2:9)=a(ind),ind=[1,3,5,7,9]）
     3. 使用end 索引
      - end 可以用来替代向量的最后一个索引
      - 如果使用了end,不能将要取元素的索引赋值给ind（令ind=5:end,MATLAB就会报错）,我们只能在a后面的小括号中使用end 来替代数组的最后一个索引。
      - 还可以对 end 进行计算，例如要访问a 中第五个至倒数第三个元素，我们可以使用a(5:end-2)
  3. 向量元素的修改和删除 
   - 利用等号赋值的方法对引用位置的元素进行修改和删除
     1. 修改
      - a(1)=4  %第一个元素改成4<br>a([1,3])=[50 60]  %第1个位置元素改成50;第3个位置元素改成60<br>a(1:3)=[5 6] (<u>MATLAB报错：无法执行赋值，因为左侧和右侧的元素数目不同。</u>)  %赋值时，左右两侧的元素个数要相同，左边引用了3个位置，右侧的向量长度为2<br>a(2:4)=100  %如果右边为常数，则将指定位置的 元素全部变成这个常数。<br>a(13)=88 %把索引为13的元素赋值为88,如果超过了最大索引，则会自动拓展向量的大小,<u>多拓展的索引11和12的位置会自动用0进行赋值</u>
     2. 删除
      - a(1)=[ ] %删除a的第一个元素（[]内加空格都可以）<br>a(end-1:end)=[ ] %删除a中最后两个元素
     3. 特殊
      - a(1,3)表示第一行第三个（==在索引中a(2,3)可能会报错，但是赋值不会==，多拓展的会直接赋值为0）
      - a(10)=[]报错，索引超出范围（删除时，索引值不能超出数量范围）
## 第三节 MATLAB中的矩阵
  1. 创建方法
     1. 直接输入法
      -  输入矩阵时要以中括号“[]”作为标识符号，矩阵的所有元素必须都在中括号内。矩阵的同行元素之间用空格或逗号分隔，行与行之间用分号或回车键分隔。
     2. 函数创建法
      - ==第一组==函数 ***zeros 、ones 和 eye*** 这三个函数分别用来创建全为0的矩阵、全为1的矩 阵和单位矩阵。
      - zeros(n)可以创建一个 n 行 n 列全为0的 矩阵；(2) zeros(m,n)可以创建一个m 行 n 列全为0的矩阵。
      - ==第二组==函数 ***rand 、randi  和 randn*** 。这三个函数分别用来创建均匀分布的随机数、均匀分布的随机整数和标准正态分布的随机数
      - ==rand 函数==用来创建区间0和1内均匀分布的随机数，其最常用的方法有两种：(1)rand(n) 可以创建一个 n 行 n 列的随机数矩阵；(2)rand(m,n)可以创建一个 m 行 n 列的随机数矩阵。由 rand  函数创建的随机数矩阵的每个元素都随机取样自0和1之间的均匀分布。
      - ==randi函数==用来创建均匀分布的随机整数，其最一般的用法为：randi([imin,imax],m,n), 该命令可创建一个m 行 n 列的随机数矩阵，随机数矩阵中的每个元素都是从区间[imin,imax]内随机抽取的整数。另外，如果 imin 等于1,那么可以简写为randi(imax,m,n);如果 m 和 n 相同，即生成一个 n 行 n 列的方阵，那么可以直接写成randi([imin,imax],n)。
      - ==randn 函数==用来创建标准正态分布的随机数，其使用方法和rand 函数类似：(1)randn(n)  可以创建一个 n 行 n 列的随机数矩阵；(2) randn(m,n)可以创建一个m 行 n 列的随机数矩阵。 
      - ==第三组==函数：***diag 和 blkdiag***。
      - ==diag函数==可用来创建对角矩阵或者获取矩阵的对角元素。<br>（1）如果输入的第一个参数是向量，则表示创建对角矩阵。diag(v,k)  将向量v 的元素放置在第k 条对角线上，其他位置元素为0。k=0  表示主对角线，k>0  位于主对角线上方，k<0  位于主对角线下方。如果 k=0, 可以直接写成diag(v)。<br>（2）如果输入的第一个参数是矩阵，则表示获取矩阵的对角元素。diag(A,k) 返 回A 的 第k 条对角线上元素的构成的列向量。
      - ==blkdiag函数==可用来创建分块对角矩阵。（分块对角矩阵是相对于常规的对角矩阵而言的，常规的对角矩阵沿对角线具有单个元素，而分块对角矩阵的对角线的元素是矩阵。）
     3. 导入本地文件中的数据
      - MATLAB 可读取本地的文件，支持的常见格式如下：
.txt 、.dat 或 .csv (适用于带分隔符的文本文件)
xls 、.xlsb 、.xlsm 、.xlsx 、.xltm 、.xltx     或 .ods  (适用于电子表格文件)
  2. 矩阵元素的引用
     1. 行列索引
       - 我们可以使用矩阵元素所处的行(row) 和列(column) 来进行引用矩阵的某一个元素， 方式为：a(row_ind,column_ind).<br>这里的 row_ind  表示要引用的元素的行索引， column_ind  表示列索引。<br>如果 row_ind  和 column_ind 都是一个**常数**，则表示提取矩阵中的单个元素；<br>如果row_ind 或 column_ind 是包含有多个元素的**向量**，则表示同时提取多个位置的元素。与向量类似，end 也可以用来替代最 后一个索引，通常和冒号法一起使用。【a([1,3],[1,3,5])表示第一三行、第一三五列的元素；
     2. 矩阵大小
       - ==size 函数==(1) size(A) 返回一个行向量，其元素是 A 的各维度的长度。若A是一个3×4的矩阵，则 size(A) 返回向量[34];如果让[r,c]=size(A),那么r=3,c=4。<br>(2)size(A,dim) 返回在维度dim 上的长度。dim = 1 时表示行；dim = 2 时表示列。若 A 是一个3×4的矩阵，则size(A,1)返回 3 ,size(A,2)返回4。
       - length  函数和 numel 函数也可以用在矩阵上。length 函数会返回行和列的较大值;numel 函数会返回矩阵中元素的总数。
     3. 取出矩阵的某一行或者某一列
      - 以取出矩阵 A  的第一行为例，我们可以 使用代码A(1,1:end),即 row_ind 取1表示第一行，column_ind 取1:end 表示从1到最后一列 的索引。这时候我们可以直接将其简写为：A(1,:),逗号后面是列索引的位置，加一个冒号就 表示取出每一列的元素。同理，要取第一列的所有元素，我们可以使用代码：A(:,1)。
     4. 线性索引
      - MATLAB在内存中将矩阵存储为单列，由它的==各列==顺次连接而成（从第一列第一个元素开始排序，第二列的第一个元素紧跟在第一列的最后一个元素之后，顺序从1开始排序）
      - ***A(a:b)/A（c）*** 命令可以以线性索引的方式将元素以取出来（列如：A(5)、A(2:7)、A(1:2:end)。另外，A(:)命令可以将A中的所有元素按照线性索引的顺序重构成一个列向量，对向量也有同样的效果
     5. 行列索引和线性索引之间进行转换
      - ==sub2ind   和 ind2sub   函数==可用于在矩阵的原始索引(双下标)和线性索引之间进行转换。他们的功能刚好相反， sub2ind 将矩阵的下标转换为线性索引； ind2sub 将线性索引转换为下标。
      - ==ind=sub2ind(sz,row,col)== 针对大小为 sz 的矩阵返回由 row 和 col 指定的行列下标的对应线性索引 ind。此处 ，sz 是包含两个元素的向量，其中 sz(1) 指定行数， sz(2) 指定列数。
      - ==[row,col]=ind2sub(sz,ind)== 返回数组 row 和 col 其中包含与大小为 sz 的矩阵的线性索引 ind  对应的等效行和列下标。此处，sz   是包含两个元素的向量，其中 sz(1) 指定行数， sz(2) 指定列数。
      - ind=sub2ind([3,3],2,2)=5<br>[row,col]=ind2sub([3,3],5)→row=2 col=2
  3. 矩阵元素的修改和删除
     1. 修改
      - 直接利用==等号赋值==的方法对矩阵中引用位置的元素进行修改，用法和对向量元素的修改类似。
      - A(2,3)=10  %第二行第三列的元素修改成10<br>A([1,3],[2,3])=[8 88;888 8888]  %左右两侧的大小要匹配
      - 也可以使用 ==线性索引(单下标的索引)== 的方式对矩阵的元素进行修改
      - A(4)=10 %将线性索引为4的元素修改成10<br>A([3,5,6])=[8 88 888] %左右两侧的元素数量要匹配
      - ==注意==，如果你在赋值时将一个或多个元素置于矩阵现有的行和列索引的边界之外，则会将矩阵的大小进行==拓展==，MATLAB 会将没有赋值的位置的元素自动==用0填充==，使其保持为完整的矩形。
      - 我们还可以通过在现有索引范围之外==插入一个新的矩阵来扩展==原始矩阵的大小。(%接上面的代码，在A的四五行、五六列加上一个新的矩阵 A(4:5,5:6)=[23;45])
     2. 删除
      - 如果我们将==等号右侧变成空向量[ ]==,则可以删除对应位置的元素。需要注意的是，==通常只能删除矩阵的整行或者整列，否则会报错。==
      - A(:,1)=[]  % 删 除 第 一 列<br>A(:,[2,end])=[]  % 删除第二列和最后一列<br>A(2,2)=[]  % MATLAB报错:空赋值只能具有一个非冒号索引。
      - 也可以通过==线性索引==来删除矩阵的元素。使用线性索引删除后， MATLAB   会将矩阵中==剩下的元素按照线性索引的顺序放入到 ***一个向量*** 中==。另外，使用线性索引可以==删除任意位置的元素==，不需要删除矩阵的一整行或者一整列。
  4. 矩阵的拼接和重复
   - 根据矩阵拼接的方向，我们可以分为==横向(水平)拼接==和==纵向(垂直)拼接==.
     1. 拼接
      - 在MATLAB中，可以使用命令 ==[A,B]  或 [A  B]== 对矩阵A 和 B 进行横向拼接，也可以使用MATLAB 中的==内置函数：horzcat(A,B)==;类似的，我们可以使用命令 ==[A;B]== 对矩阵A 和 B 进行纵向拼接，也可以使用MATLAB中的==内置函数：vertcat(A,B)。==
      - 命令cat(dim,A,B)表示沿着维度dim 方向将矩阵B 拼接到矩阵A 的末尾。<br>dim = 1 时表示沿着行方向从上往下进行拼接，即纵向拼接，因此 cat(1,A,B) 等价于 vertcat(A,B);<br>dim = 2 时表示沿着列方向从左自右进行拼接，即横向拼接，因此 cat(2,A,B) 等价于 horzcat(A,B)。
      - ==总结：若A 和 B 的行数相同，那么使用[A,B]、[A  B]、horzcat(A,B)以 及cat(2,A,B)都能 将 A 和 B 横向拼接成一个大的矩阵；若A 和 B 的列数相同，那么使用[A;B]、vertcat(A,B)以 及 cat(1,A,B)都能将A 和 B 纵向拼接成一个大的矩阵。== 注意，如果要拼接的矩阵的个数大于2,也能使用上面的方法进行拼接
     2. 重复
        1. 重复矩阵
         - 在MATLAB中，对同一个==矩阵==进行重复的堆叠的代码为==repmat(A,m,n)==，将矩阵A 重复堆叠m×n次，在行的方向上重复次，在列的方向上重复n次 （先从上到下进行行复制，再整体从左到右进行列复制）
        2. 重复元素
         - MATLAB 还可以对向量或者矩阵中的==元素==进行重复，使用到的==函数是repelem。==
           1. 重复向量v 中的元素：repelem(v,n)
            -  当 n 为一个正整数时，表示把向量v 中的每一个元素都重复n 次 ；n 也可以为一个 向量，其长度必须和v 的长度相同，它可以将v  中 第i 个位置的元素v(i) 重复n(i) 次，其中n(i) 表示n 中 第i 个位置的元素。
            - v=[5,3,8];<br>repelem(v,2) % 将v中的每个元素都重复2次 <br>repelem(v,[2,1,4]) % 将v中的第一个元素重复2次，第二个元素重复1次，第三个元素重复4次
           2. 重复矩阵A 中的元素：repelem(A,m,n)
            - m 和 n 分别表示沿着行方向(从上至下)以及沿着列方向(从左至右)将矩阵元素重复 的次数，这里的m 和 n 可以是正整数，也可以是向量。如果m 是向量，则m 的长 度要和矩阵A 的行数相同；如果n 是向量，则n 的长度要和矩阵A 的列数相同 ==（和重复矩阵不同，重复矩阵重复的是矩阵，而这个方法是重复每一行/列的元素，其不再有原矩阵为单元矩阵构成）== 
            - A=[2,3,5;8,4,7];repelem(A,3,2)  % 沿 着 行 方 向 将 A 的元素重复3次，沿着列方向重复2次<br>repelem(A,2,[1,2,3])%沿着行方向：每一行都重复2次；沿着列方向：第一列重复1次，第二列重复2次，第三列重复3次<br>repelem(A,[2,3],[1,2,3])%沿着行方向：第一行重复2次，第二行重 复3次；沿着列方向：第一列重复1次，第二列重复2次，第三列重复3次